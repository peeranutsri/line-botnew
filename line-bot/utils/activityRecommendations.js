// GAD-7 Questions
const GAD7_QUESTIONS = [
  "รู้สึกกังวลหรือประหม่าเกินเหตุ",
  "ไม่สามารถหยุดความกังวลได้",
  "กังวลมากเกินไปเกี่ยวกับสิ่งต่างๆ",
  "รู้สึกยากที่จะผ่อนคลาย",
  "รู้สึกกระสับกระส่ายจนนั่งนิ่งไม่ได้",
  "รู้สึกหงุดหงิดหรือโมโหง่าย",
  "รู้สึกกลัวว่าอะไรเลวร้ายจะเกิดขึ้น",
];

// PSS Questions
const PSS_QUESTIONS = [
  "รู้สึกหงุดหงิดเพราะสิ่งต่างๆ ไม่เป็นไปตามที่คาดหวัง",
  "รู้สึกควบคุมสิ่งสำคัญในชีวิตไม่ได้",
  "รู้สึกเครียดหรือประหม่า",
  "รับมือกับปัญหาส่วนตัวได้อย่างมั่นใจ",
  "รู้สึกว่าสิ่งต่างๆ เป็นไปด้วยดี",
  "รู้สึกว่าไม่สามารถจัดการกับสิ่งที่ต้องทำได้",
  "ควบคุมความหงุดหงิดในชีวิตประจำวันได้",
  "รู้สึกว่าคุณจัดการทุกอย่างได้ดี",
  "โกรธเพราะสิ่งที่อยู่นอกเหนือการควบคุม",
  "รู้สึกว่าปัญหาต่างๆ กองพะเนินจนจัดการไม่ไหว",
];

// Activity Recommendations
const ACTIVITY_RECOMMENDATIONS = {
  GAD7: {
    low: [
      // Score 0-4
      {
        name: "เดินในธรรมชาติ 15 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หาที่เงียบๆ เช่น สวนสาธารณะ",
          "ขั้นที่ 2: เดินช้าๆ สูดอากาศบริสุทธิ์",
        ],
        goal: 1,
      },
      {
        name: "ดื่มน้ำ 8 แก้ว",
        interactive: false,
      },
      //for Low Level
      {
        name: "ฟังเพลงผ่อนคลาย 10 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกเพลงที่คุณชอบ เช่น ดนตรีบรรเลง",
          "ขั้นที่ 2: นั่งหรือนอนในที่เงียบๆ",
          "ขั้นที่ 3: หลับตาและฟังเพลง 10 นาที",
        ],
        goal: 1,
      },
      {
        name: "จัดโต๊ะทำงานให้เป็นระเบียบ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกโต๊ะทำงานหรือมุมที่ต้องการจัด",
          "ขั้นที่ 2: เก็บของที่ไม่จำเป็นออก",
          "ขั้นที่ 3: จัดวางของให้เรียบร้อย",
        ],
        goal: 1,
      },
      {
        name: "ยืดเหยียดร่างกายเบาๆ 5 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: ยืนตรง ยืดแขนขึ้นเหนือศีรษะ ค้าง 10 วินาที",
          "ขั้นที่ 2: ก้มตัวแตะปลายเท้า ค้าง 10 วินาที",
          "ขั้นที่ 3: บิดตัวไปด้านข้างซ้ายและขวา ค้างข้างละ 10 วินาที",
        ],
        goal: 1,
      },
      {
        name: "ดื่มชาสมุนไพรอุ่นๆ",
        interactive: false,
      },
    ],
    medium: [
      // Score 5-9
      {
        name: "ฝึกยืดเส้น 3 ท่า",
        interactive: true,
        steps: [
          "ขั้นที่ 1: ยืดแขนขึ้นเหนือศีรษะ ค้างไว้ 10 วินาที",
          "ขั้นที่ 2: ก้มแตะปลายเท้า ค้างไว้ 10 วินาที",
          "ขั้นที่ 3: บิดตัวไปด้านข้าง ค้างไว้ 10 วินาที",
        ],
        maxRounds: 3,
        goal: 3,
      },
      {
        name: "เขียน Gratitude Journal",
        interactive: false,
      },
      {
        name: "Progressive Muscle Relaxation",
        interactive: false,
      },
      //for Medium Level
      {
        name: "วาดภาพระบายสี 10 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษและสีที่ชอบ",
          "ขั้นที่ 2: วาดภาพง่ายๆ เช่น ดอกไม้หรือท้องฟ้า",
          "ขั้นที่ 3: ระบายสีให้เต็ม ใช้เวลา 10 นาที",
        ],
        goal: 1,
      },
      {
        name: "นั่งสมาธิ 5 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: นั่งในที่เงียบๆ ท่าสบาย",
          "ขั้นที่ 2: หลับตา หายใจเข้าลึกๆ นับ 4",
          "ขั้นที่ 3: หายใจออกช้าๆ นับ 4 ทำซ้ำ 5 นาที",
        ],
        goal: 1,
      },
      {
        name: "จัดระเบียบตู้เสื้อผ้า",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกส่วนของตู้ที่จะจัด",
          "ขั้นที่ 2: คัดแยกเสื้อผ้าที่ไม่ได้ใช้",
          "ขั้นที่ 3: พับและจัดวางให้เป็นระเบียบ",
        ],
        goal: 1,
      },
      {
        name: "ดูคลิปสัตว์น่ารัก 5 นาที",
        interactive: false,
      },
      {
        name: "จดสิ่งที่อยากทำในวันพรุ่งนี้",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษหรือสมุด",
          "ขั้นที่ 2: เขียน 3 สิ่งที่อยากทำในวันพรุ่งนี้",
          "ขั้นที่ 3: วางแผนคร่าวๆ ว่าจะทำตอนไหน",
        ],
        goal: 1,
      },
    ],
    high: [
      // Score 10-14
      {
        name: "ฝึกท่าผ่อนคลาย 3 ท่า",
        interactive: true,
        steps: [
          "ขั้นที่ 1: นอนราบ หลับตา",
          "ขั้นที่ 2: หายใจลึกๆ 5 วินาที",
          "ขั้นที่ 3: คลายกล้ามเนื้อจากเท้าถึงศีรษะ",
        ],
        maxRounds: 3,
        goal: 3,
      },
      {
        name: "เขียนสิ่งที่กังวลแล้วฉีกทิ้ง",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษ",
          "ขั้นที่ 2: เขียนสิ่งที่กังวล",
          "ขั้นที่ 3: ฉีกกระดาษทิ้ง",
        ],
        goal: 1,
      },
      {
        name: "อาบน้ำอุ่น",
        interactive: false,
      },
      {
        name: "อ่านหนังสือที่ชอบ",
        interactive: false,
      },
      //for High Level
      {
        name: "ฟังพอดแคสต์สร้างแรงบันดาลใจ 15 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกพอดแคสต์ที่ให้พลังบวก",
          "ขั้นที่ 2: หาที่เงียบๆ นั่งหรือนอน",
          "ขั้นที่ 3: ฟังและจดบันทึกข้อคิดดีๆ",
        ],
        goal: 1,
      },
      {
        name: "ฝึกการหายใจ 4-7-8",
        interactive: true,
        steps: [
          "ขั้นที่ 1: นั่งในท่าสบาย หลับตา",
          "ขั้นที่ 2: หายใจเข้า 4 วินาที",
          "ขั้นที่ 3: กลั้นหายใจ 7 วินาที",
          "ขั้นที่ 4: หายใจออก 8 วินาที ทำซ้ำ 5 รอบ",
        ],
        maxRounds: 5,
        goal: 5,
      },
      {
        name: "เขียนจดหมายถึงตัวเองในอนาคต",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษและปากกา",
          "ขั้นที่ 2: เขียนถึงตัวเองในอีก 1 ปีข้างหน้า",
          "ขั้นที่ 3: เก็บจดหมายไว้ในที่ปลอดภัย",
        ],
        goal: 1,
      },
      {
        name: "จัดสวนหย่อมเล็กๆ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกมุมเล็กๆ ในบ้าน",
          "ขั้นที่ 2: หาต้นไม้เล็กๆ หรือกระถาง",
          "ขั้นที่ 3: จัดวางและรดน้ำต้นไม้",
        ],
        goal: 1,
      },
      {
        name: "นอนพักผ่อน 30 นาที",
        interactive: false,
      },
    ],
    severe: [
      // Score 15-21
      {
        name: "ระบายอารมณ์ด้วยคำ 5 คำ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษหรือโน้ต",
          "ขั้นที่ 2: เขียนคำที่ 1 ที่แสดงอารมณ์ตอนนี้ เช่น กลัว",
          "ขั้นที่ 3: เขียนคำที่ 2 ที่แสดงอารมณ์ตอนนี้ เช่น สับสน",
          "ขั้นที่ 4: เขียนคำที่ 3 และ 4 ที่แสดงอารมณ์ตอนนี้",
          "ขั้นที่ 5: เขียนคำที่ 5 ที่แสดงอารมณ์ตอนนี้",
        ],
        maxRounds: 5,
        goal: 5,
      },
      {
        name: "หายใจช้าๆ 5 รอบ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: นั่งในท่าสบาย",
          "ขั้นที่ 2: หายใจเข้ารอบที่ 1 ลึกๆ นับ 5 วินาที",
          "ขั้นที่ 3: หายใจออกช้าๆ รอบที่ 1 นับ 5 วินาที",
          "ขั้นที่ 4: หายใจเข้าและออกช้าๆ รอบที่ 2 และ 3",
          "ขั้นที่ 5: หายใจเข้าและออกช้าๆ รอบที่ 4 และ 5",
        ],
        maxRounds: 5,
        goal: 5,
      },
      {
        name: "ฝึก Grounding 5-4-3-2-1",
        interactive: true,
        steps: [
          "ขั้นที่ 1: มองหา 5 สิ่งรอบตัว เช่น ต้นไม้",
          "ขั้นที่ 2: สัมผัส 4 สิ่ง เช่น โต๊ะ",
          "ขั้นที่ 3: ฟัง 3 เสียง เช่น ลม",
          "ขั้นที่ 4: ดม 2 กลิ่น เช่น ดอกไม้",
          "ขั้นที่ 5: ลิ้มรส 1 อย่าง เช่น น้ำ",
        ],
        maxRounds: 5,
        goal: 5,
      },
      {
        name: "เขียนสิ่งที่อยากปล่อยวาง 3 ข้อ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษ",
          "ขั้นที่ 2: เขียนสิ่งที่ 1 และ 2 ที่อยากปล่อย เช่น ความเครียดจากงาน",
          "ขั้นที่ 3: เขียนสิ่งที่ 3 ที่อยากปล่อย แล้วฉีกกระดาษทิ้ง",
        ],
        maxRounds: 3,
        goal: 3,
      },
      //for Severe Level
      {
        name: "ฝึกการหายใจแบบสลับข้าง 5 รอบ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: นั่งในท่าสบาย หลับตา",
          "ขั้นที่ 2: ใช้มือขวาปิดจมูกขวา หายใจเข้าทางซ้าย 4 วินาที",
          "ขั้นที่ 3: ปิดจมูกซ้าย หายใจออกทางขวา 4 วินาที",
          "ขั้นที่ 4: หายใจเข้าทางขวา 4 วินาที ออกทางซ้าย 4 วินาที",
          "ขั้นที่ 5: ทำซ้ำจนครบ 5 รอบ",
        ],
        maxRounds: 5,
        goal: 5,
      },
      {
        name: "เขียนสิ่งที่ขอบคุณ 5 อย่าง",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษหรือโน้ต",
          "ขั้นที่ 2: เขียนสิ่งที่ 1 และ 2 ที่คุณรู้สึกขอบคุณ เช่น เพื่อนหรือครอบครัว",
          "ขั้นที่ 3: เขียนสิ่งที่ 3 และ 4 ที่คุณรู้สึกขอบคุณ",
          "ขั้นที่ 4: เขียนสิ่งที่ 5 ที่คุณรู้สึกขอบคุณ",
          "ขั้นที่ 5: อ่านทวนสิ่งที่เขียนแล้วยิ้มให้ตัวเอง",
        ],
        maxRounds: 5,
        goal: 5,
      },
      {
        name: "ฝึกการยืดร่างกายแบบโยคะ 3 ท่า",
        interactive: true,
        steps: [
          "ขั้นที่ 1: ท่าสุนัขก้มหน้า (Downward Dog) ค้าง 20 วินาที",
          "ขั้นที่ 2: ท่าเด็ก (Child’s Pose) ค้าง 20 วินาที",
          "ขั้นที่ 3: ท่านักรบ (Warrior Pose) ค้าง 20 วินาที",
        ],
        maxRounds: 3,
        goal: 3,
      },
      {
        name: "ฟังเสียงธรรมชาติ 15 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หาคลิปเสียงธรรมชาติ เช่น เสียงน้ำตกหรือนกร้อง",
          "ขั้นที่ 2: นั่งหรือนอนในที่เงียบๆ",
          "ขั้นที: � 3: หลับตาและฟัง 15 นาที",
        ],
        goal: 1,
      },
      {
        name: "โทรหาคนที่ไว้ใจ",
        interactive: false,
      },
    ],
  },
  PSS: {
    low: [
      // Score 0-13
      {
        name: "ถ่ายรูปสิ่งที่ทำให้ยิ้ม",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หาสิ่งที่ทำให้คุณยิ้ม เช่น ดอกไม้",
          "ขั้นที่ 2: ถ่ายรูปเก็บไว้",
        ],
        goal: 1,
      },
      {
        name: "นับดาว 5 ดวง",
        interactive: true,
        steps: ["ขั้นที่ 1: มองท้องฟ้ายามค่ำ", "ขั้นที่ 2: นับดาว 5 ดวง"],
        maxRounds: 5,
        goal: 5,
      },
      // for Low Level
      {
        name: "รดน้ำต้นไม้ 5 ต้น",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หาต้นไม้รอบบ้าน 5 ต้น",
          "ขั้นที่ 2: เตรียมน้ำและบัวรดน้ำ",
          "ขั้นที่ 3: รดน้ำต้นไม้ให้ครบ 5 ต้น",
        ],
        goal: 1,
      },
      {
        name: "ทำเครื่องดื่มที่ชอบ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกเครื่องดื่มที่ชอบ เช่น น้ำผลไม้หรือกาแฟ",
          "ขั้นที่ 2: เตรียมส่วนผสม",
          "ขั้นที่ 3: ทำเครื่องดื่มและดื่มให้สบายใจ",
        ],
        goal: 1,
      },
      {
        name: "จัดระเบียบชั้นวางหนังสือ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกชั้นวางหนังสือ",
          "ขั้นที่ 2: เก็บหนังสือที่ไม่ได้อ่านออก",
          "ขั้นที่ 3: จัดวางหนังสือให้เป็นระเบียบ",
        ],
        goal: 1,
      },
      {
        name: "ดูภาพยนตร์สั้นตลก",
        interactive: false,
      },
    ],
    medium: [
      // Score 14-26
      {
        name: "ระบายสีในจินตนาการ 3 รอบ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หลับตา จินตนาการวงกลมใหญ่ในใจ",
          "ขั้นที่ 2: เลือกสีที่ชอบในใจ",
          "ขั้นที่ 3: นึกภาพว่าคุณกำลังระบายสีวงกลม",
        ],
        maxRounds: 3,
        goal: 3,
      },
      {
        name: "ตั้งเป้าหมายเล็กๆ 1 อย่าง",
        interactive: true,
        steps: [
          "ขั้นที่ 1: คิดถึงเป้าหมายเล็กๆ เช่น เดิน 5 นาที หรือจัดโต๊ะ เขียนลงในกระดาษ แล้วเริ่มทำทันที",
        ],
        maxRounds: 1,
        goal: 1,
      },
      {
        name: "หายใจแบบกล่อง 5 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: นั่งในท่าสบาย",
          "ขั้นที่ 2: หายใจเข้ารอบที่ 1 นับ 4",
          "ขั้นที่ 3: กลั้นหายใจนับ 4",
          "ขั้นที่ 4: หายใจออกนับ 4",
          "ขั้นที่ 5: กลั้นหายใจนับ 4 แล้วทำซ้ำรอบที่ 2",
        ],
        maxRounds: 5,
        goal: 5,
      },
      {
        name: "หายใจสลับข้าง 3 รอบ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: ใช้นิ้วปิดรูจมูกขวา หายใจเข้าทางซ้าย 4 วินาที",
          "ขั้นที่ 2: ปิดรูจมูกซ้าย หายใจออกทางขวา 4 วินาที",
          "ขั้นที่ 3: สลับข้าง หายใจเข้าทางขวา 4 วินาที และออกทางซ้าย 4 วินาที",
        ],
        maxRounds: 3,
        goal: 3,
      },
      //for Medium Level
      {
        name: "เขียนสิ่งที่อยากทำในสัปดาห์นี้ 3 ข้อ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษหรือสมุด",
          "ขั้นที่ 2: เขียนสิ่งที่ 1 และ 2 ที่อยากทำในสัปดาห์นี้",
          "ขั้นที่ 3: เขียนสิ่งที่ 3 และวางแผนคร่าวๆ",
        ],
        maxRounds: 3,
        goal: 3,
      },
      {
        name: "ฝึกการยืดแขนและไหล่ 3 ท่า",
        interactive: true,
        steps: [
          "ขั้นที่ 1: ยืดแขนขวาไปด้านซ้าย ค้าง 15 วินาที",
          "ขั้นที่ 2: ยืดแขนซ้ายไปด้านขวา ค้าง 15 วินาที",
          "ขั้นที่ 3: ยกไหล่ขึ้นแล้วหมุนเป็นวงกลม 5 รอบ",
        ],
        maxRounds: 3,
        goal: 3,
      },
      {
        name: "จัดระเบียบลิ้นชัก",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกลิ้นชักที่ต้องการจัด",
          "ขั้นที่ 2: เอาของที่ไม่ใช้แล้วออก",
          "ขั้นที่ 3: จัดวางของให้เป็นระเบียบ",
        ],
        goal: 1,
      },
      {
        name: "เดินเล่นรอบบ้าน 10 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: ใส่รองเท้าที่สบาย",
          "ขั้นที่ 2: เดินรอบบ้านหรือในสวน 10 นาที",
          "ขั้นที่ 3: สูดหายใจลึกๆ ขณะเดิน",
        ],
        goal: 1,
      },
      {
        name: "ดูคลิปสอนทำอาหารง่ายๆ",
        interactive: false,
      },
    ],
    high: [
      // Score 27-40
      {
        name: "เขียนสิ่งที่กังวลแล้วฉีกทิ้ง",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษ",
          "ขั้นที่ 2: เขียนสิ่งที่กังวล",
          "ขั้นที่ 3: ฉีกกระดาษทิ้ง",
        ],
        goal: 1,
      },
      //for High Level
      {
        name: "ฝึกสมาธิด้วยการนับลมหายใจ 10 รอบ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: นั่งในที่เงียบๆ หลับตา",
          "ขั้นที่ 2: หายใจเข้านับ 1 หายใจออกนับ 1",
          "ขั้นที่ 3: ทำซ้ำจนครบ 10 รอบ",
        ],
        maxRounds: 10,
        goal: 10,
      },
      {
        name: "เขียนสิ่งที่อยากให้ตัวเองดีขึ้น 3 ข้อ",
        interactive: true,
        steps: [
          "ขั้นที่ 1: หากระดาษ",
          "ขั้นที่ 2: เขียนสิ่งที่ 1 และ 2 ที่อยากให้ดีขึ้น",
          "ขั้นที่ 3: เขียนสิ่งที่ 3 และเก็บกระดาษไว้",
        ],
        maxRounds: 3,
        goal: 3,
      },
      {
        name: "ฝึกการยืดขาและหลัง 3 ท่า",
        interactive: true,
        steps: [
          "ขั้นที่ 1: นั่งยืดขาไปข้างหน้า แตะปลายเท้า ค้าง 15 วินาที",
          "ขั้นที่ 2: นอนราบ ยกขาขึ้น 90 องศา ค้าง 15 วินาที",
          "ขั้นที่ 3: นอนคว่ำ ยกตัวขึ้น (ท่า Cobra) ค้าง 15 วินาที",
        ],
        maxRounds: 3,
        goal: 3,
      },
      {
        name: "ฟังเพลงบำบัด 20 นาที",
        interactive: true,
        steps: [
          "ขั้นที่ 1: เลือกเพลงบำบัด เช่น เสียงฝนตก",
          "ขั้นที่ 2: นอนในที่เงียบๆ",
          "ขั้นที่ 3: หลับตาและฟัง 20 นาที",
        ],
        goal: 1,
      },
      {
        name: "พูดคุยกับเพื่อนที่ไว้ใจ",
        interactive: false,
      },
    ],
  },
};

function getRecommendedActivity(testType, level, history, recommendations) {
  const availableActivities = recommendations[testType][level] || [];

  const dislikedActivities = history
    .filter((h) => h.testType.startsWith("Activity_") && h.liked === false)
    .map((h) => h.testType.replace("Activity_", ""));

  const filteredActivities = availableActivities.filter(
    (activity) => !dislikedActivities.includes(activity.name),
  );

  if (filteredActivities.length === 0) {
    return availableActivities[0] || {};
  }

  const randomIndex = Math.floor(Math.random() * filteredActivities.length);
  return filteredActivities[randomIndex];
}

module.exports = {
  GAD7_QUESTIONS,
  PSS_QUESTIONS,
  ACTIVITY_RECOMMENDATIONS,
  getRecommendedActivity,
};
